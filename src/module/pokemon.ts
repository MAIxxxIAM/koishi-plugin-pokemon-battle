const exptolv = require('../ExpToLv.json')
const Base = require('../PokemonBase.json')
const skillMachine = require('../skillMachine.json')
export const using = ['database']
import { pathToFileURL } from 'url'
import { resolve } from 'path'
import { h } from "koishi"

const pokemonCal = {
  power(a: string[], b: number) {
    try {
      let c = ['0', '0', '0', '0', '0']
      for (let i = 0; i < a.length; i++) {
        if (i == 0) { c[i] = String(Math.floor((Number(a[i]) + 30 + 1.25) * b / 50 + 10 + b)) }
        c[i] = String(Math.floor((Number(a[i]) + 30 + 1.25) * b / 50 + 5))
      }
      return c
    } catch {
      return ['0', '0', '0', '0', '0']
    }
  },
  exp_bar(a: number, b: number) {
    let exp_bar = ['=', '=', '=', '=', '=', '=', '=', '=', '=', '=']
    let nowExp = b / exptolv.exp_lv[a].exp * 100
    exp_bar[Math.floor(nowExp / 10) - 1] = `âœ§${(nowExp.toFixed(1))}%âœ§`
    return exp_bar.join('')

  },
  pokeBase(a) {
    try {
      let poke = a.split('.')
      let pokeF = poke[0]
      let pokeM = poke[1]
      let BaseList
      if (pokeF == '150' && pokeM == '150') {
        return ['100', '100', '100', '100', '100']
      }
      if (pokeF !== pokeM) {
        BaseList = [
          String(Math.floor(Number(Base.Base[pokeF].hp) < Number(Base.Base[pokeM].hp) ? Number(Base.Base[pokeF].hp) * 0.2 + Number(Base.Base[pokeM].hp) * 0.8 : Number(Base.Base[pokeF].hp) * 0.8 + Number(Base.Base[pokeM].hp) * 0.2)),
          String(Math.floor(Number(Base.Base[pokeF].att) < Number(Base.Base[pokeM].att) ? Number(Base.Base[pokeF].att) * 0.2 + Number(Base.Base[pokeM].att) * 0.8 : Number(Base.Base[pokeF].att) * 0.8 + Number(Base.Base[pokeM].att) * 0.2)),
          String(Math.floor(Number(Base.Base[pokeF].def) < Number(Base.Base[pokeM].def) ? Number(Base.Base[pokeF].def) * 0.2 + Number(Base.Base[pokeM].def) * 0.8 : Number(Base.Base[pokeF].def) * 0.8 + Number(Base.Base[pokeM].def) * 0.2)),
          String(Math.floor(Number(Base.Base[pokeF].spec) < Number(Base.Base[pokeM].spec) ? Number(Base.Base[pokeF].spec) * 0.2 + Number(Base.Base[pokeM].spec) * 0.8 : Number(Base.Base[pokeF].spec) * 0.8 + Number(Base.Base[pokeM].spec) * 0.2)),
          String(Math.floor(Number(Base.Base[pokeF].spe) < Number(Base.Base[pokeM].spe) ? Number(Base.Base[pokeF].spe) * 0.2 + Number(Base.Base[pokeM].spe) * 0.8 : Number(Base.Base[pokeF].spe) * 0.8 + Number(Base.Base[pokeM].spe) * 0.2))]
      } else { BaseList = [String(Math.floor((Number(Base.Base[pokeF].hp) + Number(Base.Base[pokeM].hp)) * 0.4)), String((Math.floor(Number(Base.Base[pokeF].att) + Number(Base.Base[pokeM].att)) *0.4)), String(Math.floor((Number(Base.Base[pokeF].def) + Number(Base.Base[pokeM].def)) * 0.4)), String(Math.floor((Number(Base.Base[pokeF].spec) + Number(Base.Base[pokeM].spec)) * 0.4)), String(Math.floor((Number(Base.Base[pokeF].spe) + Number(Base.Base[pokeM].spe)) * 0.4))] }
      return BaseList
    } catch {
      return []
    }
  },
  //å®å¯æ¢¦åˆ—è¡¨
  pokemonlist(a) {
    try {
      let pokemonNow = a.split('.')
      let pokemon_a = Number(pokemonNow[0])
      let pokemon_b = Number(pokemonNow[1])
      if (pokemon_a != pokemon_b) {
        const y = ["0", "å¦™è›™", "å¦™è›™", "å¦™è›™", "å°ç«", "ç«", "å–·ç«", "æ°å°¼", "å¡å’ª", "æ°´ç®­", "ç»¿æ¯›", "é“ç”²", "å·´å¤§", "ç‹¬è§’", "é“å£³", "å¤§é’ˆ", "æ³¢æ³¢", "æ¯”æ¯”", "å¤§æ¯”", "æ‹‰è¾¾", "æ‹‰è¾¾", "çƒˆ", "å°–å˜´", "é˜¿ä¼¯", "é˜¿ä¼¯", "çš®å¡", "é›·", "ç©¿å±±", "ç©¿å±±", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "çš®çš®", "çš®å¯", "ç‹é¢", "ç‹é¢", "ç²‰çº¢", "ç²‰çº¢", "è¶…éŸ³", "å¤§å˜´", "æ›¼å¾·æ‹‰", "é‚‹é¢", "ç¬‘é¢", "æ´¾æ‹‰", "æ´¾æ‹‰æ–¯", "å¤çœ¼", "æ‘©é²", "è±†çœ¼", "è±†çœ¼", "å–µ", "å–µ", "å¯è¾¾", "å“¥è¾¾", "çŒ´", "ç«çˆ†", "å¡è’‚", "ç¥é€Ÿ", "èšŠé¦™", "èšŠé¦™", "èšŠé¦™", "æ–œçœ¼", "å‹‡å‰", "æ™ºæ…§", "å¼ºè…•", "ç­‹è‚‰", "æ€ªåŠ›", "å–‡å­", "æƒŠå‘†", "å·¨å£", "ç›ç‘™", "æ¯’åˆº", "æ‹³çŸ³", "éš†éš†", "éš†éš†", "ç«ç„°", "çƒˆç„°", "å‘†", "å‘†å£³", "ç£é“", "ç£é“", "é¸­å˜´", "å˜Ÿå˜Ÿ", "å˜Ÿåˆ©", "æµ·", "å¤§æµ·", "è‡­", "æ¶è‡­", "åèˆŒ", "æ¶è„¸", "é¬¼é¢", "é¬¼é¢", "é‚ªé¢", "å¤§å²©", "è±¡é¼»", "è´¼çœ¼", "å¤§é’³", "å·¨é’³", "éœ¹é›³", "é¡½çš®", "ç ´è£‚", "æ¤°æœ", "å¡æ‹‰", "å˜å•¦", "é£è¸¢", "å¿«æ‹³", "å¤§èˆŒ", "ç“¦æ–¯", "ç“¦æ–¯", "ç‹¬è§’", "é’»è§’", "å‰åˆ©", "è”“è—¤", "è‚²å„¿", "å–·å˜´", "æ·±æµ·", "ç‹¬è§’", "æµ·æ´‹", "çç ", "å®çŸ³", "é­”å¢™", "é£å¤©", "è¿·å”‡", "ç”µå‡»", "é¸­å˜´", "é’³è§’", "è‚¯æ³°", "é²¤é±¼", "æš´", "æ‹‰æ™®", "è±†è±†çœ¼", "ä¼Š", "é±¼é³", "é›·ç”µ", "ç«ç„°", "æ£±è§’", "èŠçŸ³", "åˆºå£³", "èƒŒç”²", "é•°åˆ€", "åŒ–çŸ³", "å¡æ¯”", "æ€¥å†»", "é—ªç”µ", "ç«ç„°", "è¿·ä½ ", "å“ˆå…‹", "è‚¥å¤§", "è¶…", "æ¢¦"];
        const x = ["0", "è›™ç§å­", "è›™è‰", "è›™èŠ±", "ç«é¾™", "æé¾™", "ç«é¾™", "é¾Ÿ", "é¾Ÿ", "é¾Ÿ", "æ¯›è™«", "ç”²è›¹", "è¶", "è§’è™«", "æ˜†è›¹", "é’ˆèœ‚", "é›€", "é¸Ÿ", "é›•", "é¼ ", "å·¨é¼ ", "é›€", "é›", "è›‡", "æ¯’è›‡", "ä¸˜", "ä¸˜", "å…½", "é¼ ç‹", "å…°", "å¨œ", "ç‹å", "æœ—", "åŠ›è¯º", "ç‹", "çš®çš®", "å¯è¥¿", "å…­å°¾ç‹", "ä¹å°¾ç‹", "æ°”çƒ", "ä¸", "è ", "è ", "è‰", "è‡­èŠ±", "éœ¸ç‹èŠ±", "èŸ¹", "è‡èŸ¹", "çƒ", "é£è›¾", "åœ°é¼ ", "åœ°é¼ ", "å–µ", "å–µè±¹", "é¸­", "é¸­", "æ€ªçƒ", "çŒ´", "ç‹—", "çŒçŠ¬", "èŒèšª", "è›™", "æ³³è›™", "å‡¯è¥¿", "æ³¢æ‹‰", "èƒ¡åœ°", "è…•åŠ›", "å…„è´µ", "æ€ªåŠ›", "è±†èŠ½", "è±†ç‚®", "è±†ç¬¼", "æ°´æ¯", "æ°´æ¯", "æ‹³çŸ³", "å²©çŸ³", "å²©æ€ª", "ç«é©¬", "çƒˆé©¬", "æ²³é©¬", "æ²³é©¬å…½", "ç£æ€ª", "ç£é“æ€ª", "è‘±é¸­", "åŒå¤´é¸Ÿ", "ä¸‰å¤´é¸Ÿ", "æµ·ç‹®", "æµ·ç‹®", "æ³¥æµ†", "æ³¥å·´", "è´", "åˆºè´", "ç“¦æ–¯", "æ€¨çµ", "é¬¼", "å²©è›‡", "è²˜", "è²˜äºº", "èŸ¹", "å·¨èŸ¹", "ç”µçƒ", "é›·å¼¹", "è›‹è›‹", "æ¤°æ ‘", "å¡æ‹‰", "å˜å•¦", "éƒ", "éƒ", "èˆŒå¤´", "ç“¦æ–¯", "ç“¦æ–¯", "çŠ€ç‰›", "çŠ€å…½", "è›‹", "æ€ª", "è¢‹å…½", "æµ·é©¬", "æµ·é¾™", "é‡‘é±¼", "é±¼ç‹", "æµ·æ˜Ÿ", "æµ·æ˜Ÿ", "äººå¶", "è³è‚", "å§", "å…½", "ç«å…½", "ç”²è™«", "é»„ç‰›", "é±¼ç‹", "é²¤é¾™", "è´é¾™", "æ°´æ™¶æ³¥", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "å…½", "èœ—ç‰›", "è´å£³å…½", "ç”²è™«", "ç›”è™«", "ç¿¼é¾™", "å·¨å…½", "é¸Ÿ", "é¸Ÿ", "é¸Ÿ", "é¾™", "é¾™", "é¾™", "æ¢¦", "å¹»"]
        let name1 = x[pokemon_a]
        let name2 = y[pokemon_b]
        let name3 = name2 + name1
        return name3
      } else {
        const pokemonList = ["0", "å¦™è›™ç§å­", "å¦™è›™è‰", "å¦™è›™èŠ±", "å°ç«é¾™", "ç«æé¾™", "å–·ç«é¾™", "æ°å°¼é¾Ÿ", "å¡å’ªé¾Ÿ", "æ°´ç®­é¾Ÿ", "ç»¿æ¯›è™«", "é“ç”²è›¹", "å·´å¤§è¶", "ç‹¬è§’è™«", "é“å£³æ˜†", "å¤§é’ˆèœ‚", "æ³¢æ³¢", "æ¯”æ¯”é¸Ÿ", "æ¯”é›•", "å°æ‹‰è¾¾", "æ‹‰è¾¾", "çƒˆé›€", "å¤§å˜´é›€", "é˜¿ä¼¯è›‡", "é˜¿ä¼¯æ€ª", "çš®å¡ä¸˜", "é›·ä¸˜", "ç©¿å±±é¼ ", "ç©¿å±±ç‹", "å°¼å¤šå…°", "å°¼å¤šå¨œ", "å°¼å¤šå", "å°¼å¤šæœ—", "å°¼å¤šåŠ›è¯º", "å°¼å¤šç‹", "çš®çš®", "çš®å¯è¥¿", "å…­å°¾", "ä¹å°¾", "èƒ–ä¸", "èƒ–å¯ä¸", "è¶…éŸ³è ", "å¤§å˜´è ", "èµ°è·¯è‰", "è‡­è‡­èŠ±", "éœ¸ç‹èŠ±", "æ´¾æ‹‰æ–¯", "æ´¾æ‹‰æ–¯ç‰¹", "æ¯›çƒ", "æ‘©é²è›¾", "åœ°é¼ ", "ä¸‰åœ°é¼ ", "å–µå–µ", "å–µè€å¤§", "å¯è¾¾é¸­", "å“¥è¾¾é¸­", "çŒ´æ€ª", "ç«çˆ†çŒ´", "å¡è’‚ç‹—", "é£é€Ÿç‹—", "èšŠé¦™èŒèšª", "èšŠé¦™è›™", "èšŠé¦™æ¸¸å£«", "å‡¯è¥¿", "å‹‡å‰æ‹‰", "èƒ¡åœ°", "è…•åŠ›", "è±ªåŠ›", "æ€ªåŠ›", "å–‡å­èŠ½", "å£å‘†èŠ±", "å¤§é£ŸèŠ±", "ç›ç‘™æ°´æ¯", "æ¯’åˆºæ°´æ¯", "å°æ‹³çŸ³", "éš†éš†çŸ³", "éš†éš†å²©", "å°ç«é©¬", "çƒˆç„°é©¬", "å‘†å‘†å…½", "å‘†å£³å…½", "å°ç£æ€ª", "ä¸‰åˆä¸€ç£æ€ª", "å¤§è‘±é¸­", "å˜Ÿå˜Ÿ", "å˜Ÿå˜Ÿåˆ©", "å°æµ·ç‹®", "ç™½æµ·ç‹®", "è‡­æ³¥", "è‡­è‡­æ³¥", "å¤§èˆŒè´", "åˆºç”²è´", "é¬¼æ–¯", "é¬¼æ–¯é€š", "è€¿é¬¼", "å¤§å²©è›‡", "å‚¬çœ è²˜", "å¼•æ¢¦è²˜äºº", "å¤§é’³èŸ¹", "å·¨é’³èŸ¹", "éœ¹é›³ç”µçƒ", "é¡½çš®é›·å¼¹", "è›‹è›‹", "æ¤°è›‹æ ‘", "å¡æ‹‰å¡æ‹‰", "å˜å•¦å˜å•¦", "é£è…¿éƒ", "å¿«æ‹³éƒ", "å¤§èˆŒå¤´", "ç“¦æ–¯å¼¹", "åŒå¼¹ç“¦æ–¯", "ç‹¬è§’çŠ€ç‰›", "é’»è§’çŠ€å…½", "å‰åˆ©è›‹", "è”“è—¤æ€ª", "è¢‹å…½", "å¢¨æµ·é©¬", "åˆºæµ·é¾™", "è§’é‡‘é±¼", "é‡‘é±¼ç‹", "æµ·æ˜Ÿæ˜Ÿ", "å®çŸ³æµ·æ˜Ÿ", "é­”å¢™äººå¶", "é£å¤©è³è‚", "è¿·å”‡å§", "ç”µå‡»å…½", "é¸­å˜´ç«å…½", "å‡¯ç½—æ–¯", "è‚¯æ³°ç½—", "é²¤é±¼ç‹", "æš´é²¤é¾™", "æ‹‰æ™®æ‹‰æ–¯", "ç™¾å˜æ€ª", "ä¼Šå¸ƒ", "æ°´ä¼Šå¸ƒ", "é›·ä¼Šå¸ƒ", "ç«ä¼Šå¸ƒ", "å¤šè¾¹å…½", "èŠçŸ³å…½", "å¤šåˆºèŠçŸ³å…½", "åŒ–çŸ³ç›”", "é•°åˆ€ç›”", "åŒ–çŸ³ç¿¼é¾™", "å¡æ¯”å…½", "æ€¥å†»é¸Ÿ", "é—ªç”µé¸Ÿ", "ç«ç„°é¸Ÿ", "è¿·ä½ é¾™", "å“ˆå…‹é¾™", "å¿«é¾™", "è¶…æ¢¦", "æ¢¦å¹»"]
        return pokemonList[pokemon_a]
      }
    } catch {
      return 'ç©ºç²¾çµçƒ'
    }
  },
  pokemonzajiao(a: string, b: string) {
    try {
      let pokemon_a = Number(a.split('.')[0])
      let pokemon_b = Number(b.split('.')[1])
      const y = ["0", "å¦™è›™", "å¦™è›™", "å¦™è›™", "å°ç«", "ç«", "å–·ç«", "æ°å°¼", "å¡å’ª", "æ°´ç®­", "ç»¿æ¯›", "é“ç”²", "å·´å¤§", "ç‹¬è§’", "é“å£³", "å¤§é’ˆ", "æ³¢æ³¢", "æ¯”æ¯”", "å¤§æ¯”", "æ‹‰è¾¾", "æ‹‰è¾¾", "çƒˆ", "å°–å˜´", "é˜¿ä¼¯", "é˜¿ä¼¯", "çš®å¡", "é›·", "ç©¿å±±", "ç©¿å±±", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "å°¼å¤š", "çš®çš®", "çš®å¯", "ç‹é¢", "ç‹é¢", "ç²‰çº¢", "ç²‰çº¢", "è¶…éŸ³", "å¤§å˜´", "æ›¼å¾·æ‹‰", "é‚‹é¢", "ç¬‘é¢", "æ´¾æ‹‰", "æ´¾æ‹‰æ–¯", "å¤çœ¼", "æ‘©é²", "è±†çœ¼", "è±†çœ¼", "å–µ", "å–µ", "å¯è¾¾", "å“¥è¾¾", "çŒ´", "ç«çˆ†", "å¡è’‚", "ç¥é€Ÿ", "èšŠé¦™", "èšŠé¦™", "èšŠé¦™", "æ–œçœ¼", "å‹‡å‰", "æ™ºæ…§", "å¼ºè…•", "ç­‹è‚‰", "æ€ªåŠ›", "å–‡å­", "æƒŠå‘†", "å·¨å£", "ç›ç‘™", "æ¯’åˆº", "æ‹³çŸ³", "éš†éš†", "éš†éš†", "ç«ç„°", "çƒˆç„°", "å‘†", "å‘†å£³", "ç£é“", "ç£é“", "é¸­å˜´", "å˜Ÿå˜Ÿ", "å˜Ÿåˆ©", "æµ·", "å¤§æµ·", "è‡­", "æ¶è‡­", "åèˆŒ", "æ¶è„¸", "é¬¼é¢", "é¬¼é¢", "é‚ªé¢", "å¤§å²©", "è±¡é¼»", "è´¼çœ¼", "å¤§é’³", "å·¨é’³", "éœ¹é›³", "é¡½çš®", "ç ´è£‚", "æ¤°æœ", "å¡æ‹‰", "å˜å•¦", "é£è¸¢", "å¿«æ‹³", "å¤§èˆŒ", "ç“¦æ–¯", "ç“¦æ–¯", "ç‹¬è§’", "é’»è§’", "å‰åˆ©", "è”“è—¤", "è‚²å„¿", "å–·å˜´", "æ·±æµ·", "ç‹¬è§’", "æµ·æ´‹", "çç ", "å®çŸ³", "é­”å¢™", "é£å¤©", "è¿·å”‡", "ç”µå‡»", "é¸­å˜´", "é’³è§’", "è‚¯æ³°", "é²¤é±¼", "æš´", "æ‹‰æ™®", "è±†è±†çœ¼", "ä¼Š", "é±¼é³", "é›·ç”µ", "ç«ç„°", "æ£±è§’", "èŠçŸ³", "åˆºå£³", "èƒŒç”²", "é•°åˆ€", "åŒ–çŸ³", "å¡æ¯”", "æ€¥å†»", "é—ªç”µ", "ç«ç„°", "è¿·ä½ ", "å“ˆå…‹", "è‚¥å¤§", "è¶…", "æ¢¦"];
      const x = ["0", "è›™ç§å­", "è›™è‰", "è›™èŠ±", "ç«é¾™", "æé¾™", "ç«é¾™", "é¾Ÿ", "é¾Ÿ", "é¾Ÿ", "æ¯›è™«", "ç”²è›¹", "è¶", "è§’è™«", "æ˜†è›¹", "é’ˆèœ‚", "é›€", "é¸Ÿ", "é›•", "é¼ ", "å·¨é¼ ", "é›€", "é›", "è›‡", "æ¯’è›‡", "ä¸˜", "ä¸˜", "å…½", "é¼ ç‹", "å…°", "å¨œ", "ç‹å", "æœ—", "åŠ›è¯º", "ç‹", "çš®çš®", "å¯è¥¿", "å…­å°¾ç‹", "ä¹å°¾ç‹", "æ°”çƒ", "ä¸", "è ", "è ", "è‰", "è‡­èŠ±", "éœ¸ç‹èŠ±", "èŸ¹", "è‡èŸ¹", "çƒ", "é£è›¾", "åœ°é¼ ", "åœ°é¼ ", "å–µ", "å–µè±¹", "é¸­", "é¸­", "æ€ªçƒ", "çŒ´", "ç‹—", "çŒçŠ¬", "èŒèšª", "è›™", "æ³³è›™", "å‡¯è¥¿", "æ³¢æ‹‰", "èƒ¡åœ°", "è…•åŠ›", "å…„è´µ", "æ€ªåŠ›", "è±†èŠ½", "è±†ç‚®", "è±†ç¬¼", "æ°´æ¯", "æ°´æ¯", "æ‹³çŸ³", "å²©çŸ³", "å²©æ€ª", "ç«é©¬", "çƒˆé©¬", "æ²³é©¬", "æ²³é©¬å…½", "ç£æ€ª", "ç£é“æ€ª", "è‘±é¸­", "åŒå¤´é¸Ÿ", "ä¸‰å¤´é¸Ÿ", "æµ·ç‹®", "æµ·ç‹®", "æ³¥æµ†", "æ³¥å·´", "è´", "åˆºè´", "ç“¦æ–¯", "æ€¨çµ", "é¬¼", "å²©è›‡", "è²˜", "è²˜äºº", "èŸ¹", "å·¨èŸ¹", "ç”µçƒ", "é›·å¼¹", "è›‹è›‹", "æ¤°æ ‘", "å¡æ‹‰", "å˜å•¦", "éƒ", "éƒ", "èˆŒå¤´", "ç“¦æ–¯", "ç“¦æ–¯", "çŠ€ç‰›", "çŠ€å…½", "è›‹", "æ€ª", "è¢‹å…½", "æµ·é©¬", "æµ·é¾™", "é‡‘é±¼", "é±¼ç‹", "æµ·æ˜Ÿ", "æµ·æ˜Ÿ", "äººå¶", "è³è‚", "å§", "å…½", "ç«å…½", "ç”²è™«", "é»„ç‰›", "é±¼ç‹", "é²¤é¾™", "è´é¾™", "æ°´æ™¶æ³¥", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "ä¼Šå¸ƒ", "å…½", "èœ—ç‰›", "è´å£³å…½", "ç”²è™«", "ç›”è™«", "ç¿¼é¾™", "å·¨å…½", "é¸Ÿ", "é¸Ÿ", "é¸Ÿ", "é¾™", "é¾™", "é¾™", "æ¢¦", "å¹»"]
      let name3 = y[pokemon_b] + x[pokemon_a]
      let dan = pokemon_a + '.' + pokemon_b
      return [name3, dan]
    } catch {
      return 0
    }
  },
  //éšæœºæ•°
  mathRandomInt(a: number, b: number) {
    if (a > b) {
      var c = a;
      a = b;
      b = c;
    }
    return Math.floor(Math.random() * (b - a + 1) + a);
  },
  //ç­‰çº§è®¡ç®—
  expCal(a: number, b: number) {
    let lv = a
    let exp = b
    let lvup = exp / exptolv.exp_lv[lv].exp
    if (lvup > 1) {
      exp = exp - exptolv.exp_lv[lv].exp
      lv = lv + Math.floor(lvup)
    } else {
      lv = a
      exp = b
    }
    return [lv, exp]
  },
  pokemomPic(a: string, b: boolean) {
    try {
      let pokemonNow = a.split('.')
      let pokemon_a = Number(pokemonNow[0])
      let pokemon_b = Number(pokemonNow[1])

      if (b) { return h.image(pathToFileURL(resolve('./image', pokemon_a + '.' + pokemon_b + '.png')).href) } else {
        return h.image(pathToFileURL(resolve('./image', pokemon_a + '.png')).href)
      }



    } catch {
      return `å‡ºé”™å•¦`
    }
  },  
  pokebattle(a, b) {
    try {
      let log = []
      let winner
      let loser
      const attack = (att, def) => {
        let damage = Math.floor(((2 * att[0].level + 10) / 250 * Number(att[0].power[1]) / (Number(def[0].power[3]) + Number(def[0].power[2])) * skillMachine.skill[Number(att[0].skill)].Dam + 2) * (Number(att[0].power[3]) / Number(def[0].power[2] * 2.4) + (Math.random() * (0.75 - 0.65 + 1) + 0.65)))
        def[0].power[0] = def[0].power[0] - damage
        if (def[0].power[0] <= 0) { def[0].power[0] = 0 } else if (att[0].power[0] <= 0) { att[0].power[0] = 0 }
        log.push(`${att[0].battlename}çš„ [${skillMachine.skill[Number(att[0].skill)].skill}]ï¼Œé€ æˆ ${Math.floor(damage)} ä¼¤å®³,${def[0].battlename}å‰©ä½™${Math.floor(def[0].power[0])}HP`)
      }
      let first, second
      if (a[0].power[4] >= b[0].power[4]) {
        first = a
        second = b
      } else {
        first = b
        second = a
      }
      while (a[0].power[0] > 0 && b[0].power[0] > 0) {
        attack(first, second)
        if (second[0].power[0] <= 0) {
          log.push(`${first[0].battlename} èƒœåˆ©äº†`)
          break
        }
        attack(second, first)
        if (first[0].power[0] <= 0) {
          log.push(`${second[0].battlename} èƒœåˆ©äº†`)
          break
        }
      }
      if (first[0].power[0] > 0) { winner = { id: first[0].id }; loser = { id: second[0].id } } else { winner = { id: second[0].id }; loser = { id: first[0].id } }
      return [log.join('\n'), winner.id, loser.id]
    } catch
    {
      return `æˆ˜æ–—å‡ºç°æ„å¤–äº†`
    }
  },
  pokemonskill(a: number) {
    const b = 100 - a
    if (Math.random() < 0.1 * Math.floor(b / 10)) {
      return Math.floor(Math.random() * 41)
    } else return Math.floor(Math.random() * (98 - 41 + 1)) + 41
  },
  skillbag(a: string[]) {
    let skill = []
    let skillbag
    for (let i = 0; i < a.length; i++) {
      skill.push(skillMachine.skill[Number(a[i])].skill)
      if ((i + 1) % 5 === 0 && i !== 0) {
        skill.splice(i, 1, skill[i] + 'ğŸ’¿\n')
      } else {
        skill.splice(i, 1, skill[i] + 'ğŸ’¿')
      }
    }
    return skillbag = skill.join('')
  },
  findskillId(a: string) {
    let findone = skillMachine.skill.find((skill) => {
      return skill.skill === a
    })
    return findone.id ? findone.id : 0
  },
  skillinfo(a: string[]) {
    let skill = []
    for (let i = 0; i < a.length; i++) {
      skill[i] = a[i]
    }
    skill.sort((a, b) => { return Number(b) - Number(a) })
    return `ä½ çš„æŠ€èƒ½èƒŒåŒ…ä¸­ï¼Œæœ€é«˜å¨åŠ›çš„3ä¸ªæŠ€èƒ½æ˜¯
${skillMachine.skill[skill[0]].skill}:${skillMachine.skill[skill[0]].Dam}
${skillMachine.skill[skill[1]].skill}:${skillMachine.skill[skill[1]].Dam}
${skillMachine.skill[skill[2]].skill}:${skillMachine.skill[skill[2]].Dam}
`
  }
}


export default pokemonCal
